//+------------------------------------------------------------------------------------------------------------------------------------------------------+
//|                                                                                                                                         ClickMax.mq4 |
//|                                                                                                                           Copyright(c) 2016 MaryJane |
//+------------------------------------------------------------------------------------------------------------------------------------------------------+
#property copyright "Copyright (c) 2016, MaryJane"
#property strict
#property indicator_chart_window
//+------------------------------------------------------------------------------------------------------------------------------------------------------+
// --- CONSTANTS
#define SW_MAXIMIZE     3
#define SW_RESTORE      9
//+------------------------------------------------------------------------------------------------------------------------------------------------------+
// --- LIBRARIES
#include <Winuser32.mqh>
//+------------------------------------------------------------------------------------------------------------------------------------------------------+
// --- DLLs
#import "user32.dll"
#import
//+------------------------------------------------------------------------------------------------------------------------------------------------------+
// --- PROGRAM
//+------------------------------------------------------------------------------------------------------------------------------------------------------+
int      OnInit                     () {
 
	if(!IsDllsAllowed()) {
	   
	   Alert("You have to allow DLLs for ClickMax to work");
	   return INIT_FAILED; 
	
	} else return INIT_SUCCEEDED;
}
//+------------------------------------------------------------------------------------------------------------------------------------------------------+
void     OnDeinit                   (const int Reason) {}
//+------------------------------------------------------------------------------------------------------------------------------------------------------+
int      OnCalculate                (const int rates_total,
                                     const int prev_calculated,
                                     const datetime &time[],
                                     const double &open[],
                                     const double &high[],
                                     const double &low[],
                                     const double &close[],
                                     const long &tick_volume[],
                                     const long &volume[],
                                     const int &spread[]) {

   // ---------------------------------------------------------------------------------------------------------------------------------------------------+
   // (mandatory to have this in an indicator)                                                                                                                                        |
   // ---------------------------------------------------------------------------------------------------------------------------------------------------+
   
   return 0;
}
//+------------------------------------------------------------------------------------------------------------------------------------------------------+
void     OnChartEvent               (const int id, const long &lparam, const double &dparam, const string &sparam) {

   
   static uint clicktime      = GetTickCount();
   bool        doubleclick    = false;
      
   int hwnd = GetParent(WindowHandle(_Symbol, _Period));
   
   if(id == CHARTEVENT_CLICK) {
      
      if(GetTickCount() - clicktime < 300) doubleclick = true;
      clicktime = GetTickCount();
      
      if(doubleclick) {
         
         if(!IsZoomed(hwnd)) ShowWindow(hwnd, SW_MAXIMIZE);
         else ShowWindow(hwnd, SW_RESTORE);
      }
   }
}
//+------------------------------------------------------------------------------------------------------------------------------------------------------+